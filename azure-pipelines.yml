pool:
  vmImage: 'ubuntu-latest'

trigger:
  - main
  - release/*

# steps:
#  - bash: |
#     whereis mono
#     sudo apt install gtk-sharp2
#     git clone --recurse-submodules https://github.com/mono/SkiaSharp.git
#     cd SkiaSharp
#     dotnet tool restore
#     dotnet cake --target=externals-download
#     msbuild /r /v:d /p:Configuration=Release /p:BuildingInsideUnoSourceGenerator=true source/SkiaSharp.Views.Uno/SkiaSharp.Views.Uno.Wasm/SkiaSharp.Views.Uno.Wasm.csproj
#     # dotnet cake --target=libs --skipExternals="all"

resources:
  containers:
  - container: nv-bionic-wasm
    image: unoplatform/wasm-build:3.0

stages:
- stage: Build
  jobs:
  - job: Build

    container:
      image: nv-bionic-wasm
      options: "--shm-size=2gb"

    steps:
    - checkout: self
      clean: 'true'
      fetchDepth: 0

    - checkout: self
      clean: true
      
    - pwsh: |
        mkdir test
        dotnet new classlib
        dotnet add package Newtonsoft.Json --version 13.0.3
        dir $env:UserProfile\.nuget\packages
  
      displayName: test nuget
 